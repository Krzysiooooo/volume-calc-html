<!doctype html>
<html>
    <head>
        <title>Kalkulator objętości</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="default.css">
    </head>
    <body>
        <header>
            <h1>KALKULATOR OBJETOSCI</h1>
        </header>
        <div class="content">
            <h2>Wybierz figurę</h2>
            <ul class="menu">
                <li>
                    <img src="../images/walec.png">
                    <button data-figure="walec">Walec</button>
                </li>
                <li>
                    <img src="../images/kula.png">
                    <button data-figure="kula">Kula</button>
                </li>
                <li>
                    <img src="../images/stozek.png">
                    <button data-figure="stozek">Stożek</button>
                </li>
                <li>
                    <img src="../images/prostopadloscian.png"/>
                    <button data-figure="prostopadloscian">Prostopadłościan</button>
                </li>
            </ul>
            <div class="calculator">
                <h2 id="selected-figure"></h2>
                <div>
                    <p>Promień</p>
                    <input id="input-r">
                </div>
                <div>
                    <p>Wysokosc</p>
                    <input id="input-h">
                </div>
                <div>
                    <p>...</p>
                    <input id="input-a">
                </div>
                <button id="calc">Policz</button>
                <div>
                    <h2>Objętość wybranej figury wynosi:</h2>
                    <p id="selected-figure-field"></p>
                </div>
            </div>
        </div>
        <footer></footer>
        <script type="text/javascript">

            const calcFieldMap = {
                walec: (input) => {
                    return Math.PI * Math.pow(input.r, 2) * input.h
                },
                kula: (input) => {
                    return 4 / 3 * Math.PI * Math.pow(input.r, 3);
                },
                stozek: (input) => {
                    return 1 / 3 * Math.PI * Math.pow(input.r, 2) * input.h
                },
                prostopadloscian: (input) => {
                    return input.r * input.h * input.a
                }

            };

            var activeFigure = {
                name: '',
                input: {},
                field: 0
            };

            function clickListener(event) {
                activeFigure.name = event.target.getAttribute('data-figure');
                document.querySelector("#selected-figure").innerHTML = activeFigure.name;
                document.querySelector(".calculator").style.display = "block";
            }

            document.querySelector("#calc").addEventListener("click", () => {
                const input = {
                    r: parseInt(document.querySelector("#input-r").value),
                    h: parseInt(document.querySelector("#input-h").value),
                    a: parseInt(document.querySelector("#input-a").value)
                };
                const fieldFn = calcFieldMap[activeFigure.name];
                activeFigure.input = input;
                activeFigure.field = fieldFn(input);
                document.querySelector("#selected-figure-field").innerText = activeFigure.field;
                document.querySelector("#input-r").value = '';
                document.querySelector("#input-h").value = '';
                document.querySelector("#input-a").value = '';
            });

            var buttons = document.querySelectorAll('.menu button');
            buttons.forEach(function (button) {
                button.addEventListener("click", clickListener)
            })

        </script>
    </body>
</html>